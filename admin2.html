<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CribzConnect Admin Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        /* Additional admin-specific styles */
        body { font-family: 'Inter', sans-serif; }
        .admin-container { display: flex; min-height: 100vh; }
        .sidebar { width: 250px; background: #2c3e50; color: #fff; display: flex; flex-direction: column; }
        .sidebar img { width: 150px; margin: 20px auto; }
        .sidebar a { color: #fff; padding: 15px 20px; text-decoration: none; display: block; transition: background 0.3s; }
        .sidebar a:hover { background: #34495e; }
        .main-content { flex: 1; padding: 30px; background: #f8f9fa; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .card h3 { margin-bottom: 15px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; border-bottom: 1px solid #ddd; text-align: left; }
        th { background: #f1f1f1; }
        .btn { padding: 8px 12px; border-radius: 6px; border: none; cursor: pointer; margin-right: 5px; }
        .btn-approve { background: #28a745; color: white; }
        .btn-decline { background: #dc3545; color: white; }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <img src="https://raw.githubusercontent.com/Isreal5161/cribzconnect.com/main/logo.png" alt="Logo">
            <a href="#dashboard">Dashboard</a>
            <a href="#users">Users</a>
            <a href="#listings">Listings</a>
            <a href="#posts">Homepage Posts</a>
            <a href="#balances">Balances</a>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Overview -->
            <div id="dashboard" class="card">
                <h3>Dashboard Overview</h3>
                <p>Total Users: <span id="total-users">0</span></p>
                <p>Total Listings: <span id="total-listings">0</span></p>
                <p>Pending Posts: <span id="pending-posts">0</span></p>
                <p>Total Balance: $<span id="total-balance">0.00</span></p>
            </div>

            <!-- Users Table -->
            <div id="users" class="card">
                <h3>Manage Users</h3>
                <table>
                    <thead>
                        <tr><th>Name</th><th>Email</th><th>Action</th></tr>
                    </thead>
                    <tbody id="users-table">
                        <!-- Populated via JS -->
                    </tbody>
                </table>
            </div>

            <!-- Listings Table -->
            <div id="listings" class="card">
                <h3>Property Listings</h3>
                <table>
                    <thead>
                        <tr><th>Title</th><th>Host</th><th>Status</th><th>Action</th></tr>
                    </thead>
                    <tbody id="listings-table">
                        <!-- Populated via JS -->
                    </tbody>
                </table>
            </div>

            <!-- Homepage Posts -->
            <div id="posts" class="card">
                <h3>Homepage Posts</h3>
                <table>
                    <thead>
                        <tr><th>Title</th><th>Author</th><th>Status</th><th>Action</th></tr>
                    </thead>
                    <tbody id="posts-table">
                        <!-- Populated via JS -->
                    </tbody>
                </table>
            </div>

            <!-- Balances -->
            <div id="balances" class="card">
                <h3>Balances</h3>
                <table>
                    <thead>
                        <tr><th>User</th><th>Balance</th></tr>
                    </thead>
                    <tbody id="balances-table">
                        <!-- Populated via JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Default sample data
        const users = [
            { name: 'John Doe', email: 'john@example.com' },
            { name: 'Jane Smith', email: 'jane@example.com' }
        ];

        const listings = [
            { title: 'Cozy 2BR Apartment', host: 'John Doe', status: 'Pending' },
            { title: 'Luxury Villa', host: 'Jane Smith', status: 'Approved' }
        ];

        const posts = [
            { title: 'Grand Opening of New Apartment', author: 'John Doe', status: 'Pending' },
            { title: 'Special Discount Offers', author: 'Jane Smith', status: 'Approved' }
        ];

        const balances = [
            { user: 'John Doe', amount: 120.50 },
            { user: 'Jane Smith', amount: 250.00 }
        ];

        function populateTables() {
            // Users
            const usersTable = document.getElementById('users-table');
            usersTable.innerHTML = '';
            users.forEach((u, i) => {
                const row = `<tr>
                    <td>${u.name}</td>
                    <td>${u.email}</td>
                    <td>
                        <button class="btn btn-decline" onclick="deleteUser(${i})">Delete</button>
                    </td>
                </tr>`;
                usersTable.innerHTML += row;
            });

            // Listings
            const listingsTable = document.getElementById('listings-table');
            listingsTable.innerHTML = '';
            listings.forEach((l, i) => {
                const row = `<tr>
                    <td>${l.title}</td>
                    <td>${l.host}</td>
                    <td>${l.status}</td>
                    <td>
                        <button class="btn btn-approve" onclick="approveListing(${i})">Approve</button>
                        <button class="btn btn-decline" onclick="declineListing(${i})">Decline</button>
                    </td>
                </tr>`;
                listingsTable.innerHTML += row;
            });

            // Posts
            const postsTable = document.getElementById('posts-table');
            postsTable.innerHTML = '';
            posts.forEach((p, i) => {
                const row = `<tr>
                    <td>${p.title}</td>
                    <td>${p.author}</td>
                    <td>${p.status}</td>
                    <td>
                        <button class="btn btn-approve" onclick="approvePost(${i})">Approve</button>
                        <button class="btn btn-decline" onclick="declinePost(${i})">Decline</button>
                    </td>
                </tr>`;
                postsTable.innerHTML += row;
            });

            // Balances
            const balancesTable = document.getElementById('balances-table');
            balancesTable.innerHTML = '';
            balances.forEach(b => {
                const row = `<tr>
                    <td>${b.user}</td>
                    <td>$${b.amount.toFixed(2)}</td>
                </tr>`;
                balancesTable.innerHTML += row;
            });

            // Update dashboard stats
            document.getElementById('total-users').textContent = users.length;
            document.getElementById('total-listings').textContent = listings.length;
            document.getElementById('pending-posts').textContent = posts.filter(p => p.status === 'Pending').length;
            document.getElementById('total-balance').textContent = balances.reduce((sum, b) => sum + b.amount, 0).toFixed(2);
        }

        function deleteUser(index) {
            if(confirm('Are you sure you want to delete this user?')) {
                users.splice(index, 1);
                populateTables();
            }
        }

        function approveListing(index) {
            listings[index].status = 'Approved';
            populateTables();
        }

        function declineListing(index) {
            listings[index].status = 'Declined';
            populateTables();
        }

        function approvePost(index) {
            posts[index].status = 'Approved';
            populateTables();
        }

        function declinePost(index) {
            posts[index].status = 'Declined';
            populateTables();
        }

        document.addEventListener('DOMContentLoaded', populateTables);
    </script>
</body>
</html>
